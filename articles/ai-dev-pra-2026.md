---
title: "Claude Codeを活用したコード理解の向上"
emoji: "🍣"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["Claude Code","Go"]
published: true
---

# Claude Codeを活用したコード理解の向上

## はじめに

Anthropicが2026年1月に公開した研究「How AI Impacts Skill Formation」(https://www.anthropic.com/research/AI-assistance-coding-skills) では、AIコーディングツールを使った開発者の学習効果について興味深い結果が報告されています。
AIを使ってコードを書いた開発者は、手作業でコードを書いた開発者と比べてスキル習得テストの点数が17%低かったというものです。

ただし、この研究ではAIの使い方によって結果に大きな差があることも示されています。AIにコードの生成を丸投げした人は理解度が低かった一方で、AIに「なぜそう書くのか」を質問したり、生成されたコードの説明を求めたりした人は、高い理解度を維持していました。

この研究が示しているのは、AIを「代わりに書いてもらう道具」として使うか、「理解を助けてもらう道具」として使うかで、学習効果がまったく異なるということです。本記事で紹介するのは、まさに後者のアプローチです。

私はソフトウェアエンジニアとして業務でGo言語を使い始めたのですが、Goは初めて触る言語でした。新しい言語でのプロジェクト参加は、コードを読む力がそのまま仕事の速度に直結します。ただ動くコードを書くだけではなく、なぜそう書かれているのかを理解することが、長期的な成長につながると感じています。
この記事では、AIコーディングツールであるClaude Codeを「コードを理解するための学習ツール」として活用する方法を紹介します。具体的には、以下の3つのアプローチを取り上げます。

- /output-styleで自分の手を動かす機会を作る
- /forkでメインのコンテキストを汚さずに寄り道する
- カスタムスラッシュコマンドでPR説明を通じた理解力の向上

## /output-styleを利用して自分でコードを書く機会を作る

### AIに任せきりにしない仕組み

Claude Codeのデフォルトの動作は、タスクを効率よく完了することに最適化されています。指示を出せば、Claudeがコードを書き、テストを走らせ、修正まで行ってくれます。
非常に便利ですが、この使い方だけでは言語そのものの理解はなかなか進みません。

ここで活用したいのが `/output-style` コマンドです。Claude Codeにはビルトインで3つのOutput Styleが用意されています。

- Default: 従来どおり効率重視のスタイル
- Explanatory: コーディング作業の合間に、実装の意図やコードベースのパターンについてInsights（学びのポイント）を挟んでくれるスタイル
- Learning: Explanatoryの内容に加えて、コードの一部を自分で書くよう促してくれるスタイル。`TODO(human)` というマーカーがコード内に挿入され、自分で実装する箇所が明示される

### Learningモードの実践

新しい言語を学んでいる立場として特に有効だと感じたのはLearningモードです。
例えば、HTTPハンドラの実装を依頼したとき、Claudeはルーティングやミドルウェアの構成は組み上げつつ、ハンドラの中身に `TODO(human)` を残してくれます。全体の構造を把握しながら、自分の手で核心部分を書く体験ができます。
このスタイルでは、Claudeが単にコードの穴を残すだけでなく、なぜその実装パターンを選んだのか、Goではどういう慣習があるのかといった説明も合わせて提示してくれます。
受動的にコードを眺めるのと、自分の手を動かしながら学ぶとより理解が深まります。

```
/output-style learning
```

このコマンド一つで、Claude Codeが「効率的な作業パートナー」から「自分で考える機会をくれるメンター」に変わります。

### カスタムOutput Styleという選択肢

ビルトインのスタイル以外に、自分だけのカスタムOutput Styleを作ることもできます。`~/.claude/output-styles/` ディレクトリ（ユーザーレベル）または `.claude/output-styles/` ディレクトリ（プロジェクトレベル）にMarkdownファイルを配置するだけです。
例えば、Go初学者向けのメンタースタイルとして `~/.claude/output-styles/coding-mentor.md` を以下のように作成します。

```markdown
---
name: coding-mentor
description: Go初学者向けのコーディングメンター
---

# Coding Mentor Style

コードを生成・修正する際は、以下を必ず含めてください。

- そのコードが何をしているかの解説
- Go特有のイディオムや慣習がある場合はその説明
- 標準ライブラリの関数を使用した場合、その関数の役割と選定理由
- 他の書き方がある場合は、なぜこの書き方を選んだかの比較

ユーザーが理解を深められるよう、一方的にコードを渡すのではなく、
考え方のプロセスを共有することを優先してください。
```

フロントマターの `name` がスタイル名、`description` が選択時の説明文になります。
ファイルを保存したら `/output-style` メニューを開くと、ビルトインのスタイルと並んで自分が作成したカスタムスタイルが表示されるので、そこから切り替えられます。
Markdownファイルを直接書くため、細かいニュアンスを自分の言葉で指定できます。
学習フェーズが進むにつれて「もう基本的な構文の説明はいらないけど、並行処理のパターンは丁寧に解説してほしい」といった調整も、ファイルを編集するだけで対応できる点が便利です。

## /forkコマンドでメインのコンテキストを汚さずに調べる

### コード作業中の「寄り道」問題

コードを書いている最中に、「この構文はどういう意味だろう」「この標準ライブラリの関数は内部でどう動いているんだろう」と気になることがあります。
Claude Codeにそのまま質問すると回答は得られますが、そのやり取りがメインの作業コンテキストに蓄積されていきます。
Claude Codeにはコンテキストウィンドウという制約があり、会話の履歴やファイルの内容が蓄積されるほど、使えるトークンは減っていきます。
調べものの往復が増えるとコンテキストが膨張し、本来の作業の品質に影響しかねません。

### /forkで会話を分岐させる

ここで活用できるのが `/fork` コマンドです。
`/fork` は現在の会話を分岐させて、別のセッションとして新しい会話を始める機能です。分岐した先での会話はメインのコンテキストには影響しないため、気になったことを自由に深掘りできます。
使い方のイメージは以下のとおりです。

1. コードを書いている途中で気になる点が出てくる
2. `/fork` を実行して、会話を分岐させる
3. 分岐先のセッションで、気になった内容について質問・調査する
4. 調査が終わったら、元のセッションに戻って作業を再開する

メインのセッションはフォーク時点の状態がそのまま保たれているため、調査で消費したコンテキストに圧迫されることなく、クリーンな状態で作業を続けられます。

### 学習中の身にとっての効果

Go言語を学び始めたばかりの頃は、基本的な文法や慣用表現について頻繁に調べたくなるものです。例えば、以下のような疑問です。

- `context.Context` はなぜ関数の第一引数に渡す慣習があるのか
- `defer` の評価タイミングはいつなのか
- `error` インターフェースを独自に実装するのはどういう場面か

こうした疑問のたびにメインの作業セッションのコンテキストを消費するのはもったいないので、`/fork` で調べもの用のセッションを分けるという使い方は、学習中の身にとって効果的でした。
疑問を我慢せず、かつ作業効率も落とさないという両立ができます。

## カスタムスラッシュコマンドでPR説明を通じた理解力を上げる

### PRレビューを学びの場にする

チーム開発では、プルリクエスト（PR）の作成と確認が日常的なワークフローに組み込まれています。
PRの内容を正確に理解するには、何がどう変更されたのか、なぜそう変更したのかを把握する必要があります。この「変更の意図を読み取る」プロセスそのものが、コード理解を深める効果的な訓練です。
Claude Codeでは、カスタムスラッシュコマンドを作成して繰り返し使うことができます。私はPRの内容を解説してもらうコマンドを用意し、その出力を読むことで自分の理解を確認しています。

### 実際に使っているPR解説コマンド

`.claude/commands/` ディレクトリにMarkdownファイルを配置すると、Claude Codeがスラッシュコマンドとして認識してくれます。
私が実際に使っている `pr-explain.md` は以下のような内容です。

```markdown
---
allowed-tools: Bash(gh pr view:*)
---

指定されたPR番号のPRについて解説してください。

## 手順

1. `gh pr view $ARGUMENTS --json title,body,state,additions,deletions,files,commits,headRefName,baseRefName` を実行してPR情報を取得
2. 以下の観点で解説:
   - 概要: PRの目的と変更内容のサマリー
   - 変更の規模: 追加行数、削除行数
   - 変更ファイル一覧: 主要な変更ファイルとその役割
   - アーキテクチャ/設計: 該当する場合は図解（Mermaidまたはアスキーアート）
   - メリット/影響: この変更によるメリットや影響範囲
   - コミット履歴: 段階的な変更の流れ
3. 実装内容についてファイル毎に解説
   - 理解しやすい単位でステップを分けて説明
   - 実装意図も分かるように解説
   - 言語特有の記載については重点的に解説

## 引数

$ARGUMENTS: PR番号（例: 80）
```

`/pr-explain 80` のように入力するだけで、ClaudeがGitHub CLIを通じてPR情報を取得し、構造化された解説を返してくれます。
ポイントは `allowed-tools: Bash(gh pr view:*)` の部分です。このフロントマターにより、コマンド実行時に `gh pr view` の実行が許可されるため、毎回の確認ダイアログなしにスムーズにPR情報を取得できます。
また、`$ARGUMENTS` を使うことで、PR番号を引数として渡せる汎用的なコマンドになっています。

### ファイルの読み順を示してもらう

Go言語が初めてだったこともあり、特に役に立ったのは「変更ファイル一覧」と「ファイル毎の解説」の部分です。
PRに含まれるファイルの一覧を見ただけでは、どこから読み始めれば良いのかがわからないことがあり、Claudeの解説ではファイル間の依存関係や設計上の役割を踏まえた順序で説明されるため、変更の全体像を段階的に理解できます。
例えば、クリーンアーキテクチャを採用したプロジェクトでは、以下のような順序で確認を進めていきます。

```
  Domain Layer（中心）── 「何をしたいか」を理解
      |
  Infrastructure Layer ── 「どう実現するか」を理解
      |
  Presentation/Config ── 「どう繋がるか」を理解
```

まずドメイン層のエンティティやリポジトリのインターフェース定義を読んで、このPRが「何を」扱っているかを掴みます。
次にインフラ層のリポジトリ実装やデータベース周りを確認して、「どう」実現しているかを理解します。
最後にハンドラやルーティングの設定を見て、「どう繋がっているか」を把握します。
初学者の段階では、この読み順を自分で判断するのが難しいため、Claudeに提示してもらうことで効率的にコードを追えるようになりました。
また、Go特有の書き方（エラーハンドリングのパターン、インターフェースの暗黙的な実装など）について重点的に解説してもらえるよう、コマンドの指示に「言語特有の記載については重点的に解説」と含めている点もポイントです。

### /forkとの組み合わせ

PR解説コマンドの出力を読んでいると、「この関数のシグネチャに `context.Context` が入っているのはなぜだろう」「このエラーハンドリングのパターンは他でも使えるのだろうか」といった疑問が次々と湧いてきます。
このときに先述した `/fork` を使って調査用のセッションを分岐させれば、PR解説のコンテキストを保ったまま、個別の疑問を深掘りできます。
PR解説をきっかけに気になった点を `/fork` で調べ、理解を深めてからメインのセッションに戻る。
この流れを繰り返すことで、一つのPRから得られる学びの量が大きく変わりました。


## まとめ

Claude Codeは強力なコーディングツールですが、使い方次第で学習ツールとしても大きな力を発揮します。この記事で紹介した3つのアプローチを振り返ります。

- `/output-style learning` で自分の手を動かす機会を確保する。Claudeにすべてを任せるのではなく、`TODO(human)` を通じて自分で考え、書く体験を積むことで、新しい言語の感覚が身についていきます。
- `/fork` で会話を分岐させ、気になったことを調べるための専用のセッションを作る。メインの作業コンテキストを汚さずに疑問を解消でき、「調べたいけどコンテキストがもったいない」というジレンマから解放されます。
- カスタムスラッシュコマンドでPR解説を生成し、変更の構造と意図をレイヤーごとに理解する。ファイルの読み順を示してもらうことは、新しい言語やアーキテクチャに慣れていない段階で特に効果的です。

新しい言語を学ぶとき、AIに頼りすぎると自分の力がつかないのではないかという不安を感じることがあるかもしれません。
しかし、「AIにやってもらう」のではなく「AIに教えてもらう」方向に使い方を工夫することで、むしろ学習効率を高められると実感しています。
自分の学習スタイルに合った使い方を模索してみてください。